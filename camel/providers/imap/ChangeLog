2005-07-21  Shreyas Srinivasan  <sshreyas@novell.com>

	* camel-imap-wrapper.h: Fix camel-docs breakage by changing
	style
	
2005-07-20  Not Zed  <NotZed@Ximian.com>

	* camel-imap-store.h: re-arrange some bitfields (this is not
	public api), and add a refresh stamp so we know when to next
	refresh the list of folders from the server.

	* camel-imap-store.c (imap_build_folder_info): set unknown counts
	-1, not 0.
	(get_folder_online): if the folder is on disk, just get it
	offline, only go to the server if we need to.
	(fill_fi): dont refresh the folder here, let the client code do
	it.

	* camel-imap-command.c (imap_command_start): add some asserts,
	time to fix those 'stream == NULL' warnings properly.
	(camel_imap_command_continuation): same.

	* camel-imap-store.c (get_folder_counts): remove this, we rely on
	the client calling folder.refresh_info instead.
	(get_one_folder_offline): removed, handled more directly from the
	storesummary now.
	(refresh_refresh): new async function to update the list of
	folders (not the folder counts) from the server.  We now just use
	"*" to get all the folders rather than frobbing around with
	partial fetches.
	(get_folder_info_online): changed radically, if we are getting
	subscribed folders, always go to the local list, but update it
	asynchronously if we need to.  if we're not, then always go to the
	server, but use a simplified listing mechanism.
	(camel_imap_store_connected): changed to hide some hidden logic,
	we want not only connected, but online as well; so make it
	actually do that.
	(fill_fi): dont do anything slow here, dont honour the 'not fast'
	flag anymore.

2005-07-19  Not Zed  <NotZed@Ximian.com>

	* camel-imap-folder.c (imap_get_message): dont force a connect
	until we need it.
	(camel_imap_folder_fetch_data): force a connect if we need it.
	(imap_refresh_info): force connect if we need to.
	(imap_get_message): touch the summary if we changed the body
	content info record.

	* camel-imap-store.c (camel_imap_store_init): we always support
	subscriptions, this is a backend property not a store instance
	property.
	(imap_connect_online, rename_folder, get_one_folder_offline) 
	(get_folder_info_offline): fix for above.
	(get_folder_offline): wtf is it connecting for???

2005-07-13  Not Zed  <NotZed@Ximian.com>

	* camel-imap-folder.c (imap_refresh_info): copy over counts to the
	store summary & save all summaries.

2005-07-12  Not Zed  <NotZed@Ximian.com>

	* camel-imap-store.c (imap_connect_online): only get the folder
	list if we dont have any yet.

2005-07-11  Not Zed  <NotZed@Ximian.com>

	* camel-imap-store.c (get_folder_info_online): if we are fast,
	then dont go to the server at all, if we have any folders
	recorded.
	(get_folder_counts): never request STATUS on unselected folders.
	(get_folder_info_offline): build the list directly from the
	summary, dont scan the filesystem.
	(parse_list_response_as_folder_info): always initialise counts to
	unknown (-1).

2005-03-18  Jeffrey Stedfast  <fejj@novell.com>

	* camel-imap-command.c (imap_read_untagged): Continue reading data
	until we've read all the data (camel_stream_read() makes no
	guarantee that it will read n bytes in a single call).

2005-03-10  Jeffrey Stedfast  <fejj@novell.com>

	* camel-imap-folder.c (imap_sync_online): READ-ONLY doesn't mean
	we can't sync flags, allow flag syncing even in READ-ONLY mode
	since the RFC states that flags listed in PERMANENTFLAGS are
	always settable.

2005-03-07  JP Rosevear  <jpr@novell.com>

	From Dave Malcolm <dmalcolm@redhat.com>
	
	* camel-imap-store-summary.c
	(camel_imap_store_summary_namespace_set): move forward declaration
	out of block to fix gcc4 compilation
	
2005-03-01  Not Zed  <NotZed@Ximian.com>

	** See bug #73112

	* camel-imap-store.c (query_auth_types): don't re-connect if we're
	already connected.

2005-02-22  Not Zed  <NotZed@Ximian.com>

	** See bug #61468

	* camel-imap-folder.c (imap_update_summary): get rid of the stupid
	HEADER.FIELDS NOT() blah, it just caused more problems than it
	ever solved.

2005-02-15  Bj√∂rn Torkelsson  <torkel@acc.umu.se>

	* camel-imap-store.c (imap_build_folder_info): Rename inbox/INBOX to 
	Inbox, so it is translatable.
	(parse_list_response_as_folder_info): here too.

2005-02-08  Jeffrey Stedfast  <fejj@novell.com>

	* camel-imap-folder.c (do_copy): Don't always delete the original
	messages.

2005-02-04  Not Zed  <NotZed@Ximian.com>

	* camel-imap-store.c: Revert jeff's patch.
	(parse_list_response_as_folder_info): copy the subscribed flag
	from the storeinfo.
	(get_folders_online): here too.

2005-02-03  Not Zed  <NotZed@Ximian.com>
	
	** See bug #70590.

	* camel-imap-command.c (camel_imap_response_free): handle XGWMOVE
	response the same as EXPUNGE.

	* camel-imap-folder.c (do_copy): added 'delete' flag, and use
	xgwmove if its available and we're moving a message.

	* camel-imap-store.c (imap_get_capability): add some groupwise
	extension flags.

2005-02-02  Jeffrey Stedfast  <fejj@novell.com>

	* camel-imap-store.c (get_folders_online): Set the
	CAMEL_FOLDER_SUBSCRIBED flag appropriately.
	(get_subscribed_folders): Set here too.
	(get_subscription_info): Set the subscribed bit.
	(get_folder_info_online): If subscribed info is requested, fill
	it.

2005-02-01  Jeffrey Stedfast  <fejj@novell.com>

	* camel-imap-summary.c (summary_header_load): Bumped version to 3
	and added code to handle evrsion 2 (for compat with imap4 ver 2
	summary files).

2005-02-01  Not Zed  <NotZed@Ximian.com>

	* camel-imap-store.c (parse_list_response_as_folder_info): set the
	folder-type of inbox to inbox & use the right flags field for
	noinferiors hack.

2005-01-31  Not Zed  <NotZed@Ximian.com>

	** See bug #69757.
	
	* providers/imap/camel-imap-store.c (create_folder)
	(parse_list_response_as_folder_info): free the
	folder from parse_list_response.

2005-01-28  Not Zed  <NotZed@Ximian.com>

	** See bug #22496.

	* camel-imap-command.c (camel_imap_command_response): check for no
	and bad [alert] as well as ok [alert].
	

	** This provider is dead.

Refer to main changelog for earlier changes.

